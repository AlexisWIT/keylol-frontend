<window position="center" class="window-synchronization">
    <div class="window">
        <div class="window-exit-button" ng-click="cancel()">
            <div ng-include="'assets/images/exit.svg'"></div>
        </div>
        <div class="heading">
            <h4 ng-if="!notFirstTime">首次进入其乐时，同步订阅会为你发现感兴趣的信息</h4>
            <h4 ng-if="notFirstTime">上次同步订阅已被更新为以下据点</h4>
            <h2 ng-if="fetchSuccess" class="labeled-heading">你的据点订阅已与 Steam 动态同步</h2>
            <h2 ng-if="!fetchSuccess" class="labeled-heading">未能进行同步订阅</h2>
        </div>
        <ul class="types" ng-if="fetchSuccess">
            <li ng-if="autoSubscribed.MostPlayed.length > 0">
                <p>游戏据点 - 在档时间最长</p>
                <ul class="points clearfix">
                    <li ng-repeat="point in autoSubscribed.MostPlayed track by point.Id">
                        <point-link type="'point'" avatar-url="point.AvatarImage" id-code="point.IdCode" ></point-link>
                        <div class="title">
                            <p>
                                <point-link type="'point'" point-name="utils.getPointFirstName(point)" id-code="point.IdCode" ></point-link>
                            </p>
                            <p>{{utils.getPointSecondName(point)}}</p>
                        </div>
                        <a class="delete" ng-if="!point.deleteDisabled" href="" ng-click="deleteAuto(point)">退订</a>
                    </li>
                </ul>
            </li>
            <li ng-if="autoSubscribed.RecentPlayed.length > 0">
                <p>游戏据点 - 最近游戏</p>
                <ul class="points clearfix">
                    <li ng-repeat="point in autoSubscribed.RecentPlayed track by point.Id">
                        <point-link type="'point'" avatar-url="point.AvatarImage" id-code="point.IdCode" ></point-link>
                        <div class="title">
                            <p>
                                <point-link type="'point'" point-name="utils.getPointFirstName(point)" id-code="point.IdCode" ></point-link>
                            </p>
                            <p>{{utils.getPointSecondName(point)}}</p>
                        </div>
                        <a class="delete" ng-if="!point.deleteDisabled" href="" ng-click="deleteAuto(point)">退订</a>
                    </li>
                </ul>
            </li>
            <li ng-if="autoSubscribed.Genres.length > 0">
                <p>类型据点</p>
                <ul class="points clearfix">
                    <li ng-repeat="point in autoSubscribed.Genres track by point.Id">
                        <point-link type="'point'" avatar-url="point.AvatarImage" id-code="point.IdCode" ></point-link>
                        <div class="title">
                            <p>
                                <point-link type="'point'" point-name="utils.getPointFirstName(point)" id-code="point.IdCode" ></point-link>
                            </p>
                            <p>{{utils.getPointSecondName(point)}}</p>
                        </div>
                        <a class="delete" ng-if="!point.deleteDisabled" href="" ng-click="deleteAuto(point)">退订</a>
                    </li>
                </ul>
            </li>
            <li ng-if="autoSubscribed.Manufacturers.length > 0">
                <p>厂商据点</p>
                <ul class="points clearfix">
                    <li ng-repeat="point in autoSubscribed.Manufacturers track by point.Id">
                        <point-link type="'point'" avatar-url="point.AvatarImage" id-code="point.IdCode" ></point-link>
                        <div class="title">
                            <p>
                                <point-link type="'point'" point-name="utils.getPointFirstName(point)" id-code="point.IdCode" ></point-link>
                            </p>
                            <p>{{utils.getPointSecondName(point)}}</p>
                        </div>
                        <a class="delete" ng-if="!point.deleteDisabled" href="" ng-click="deleteAuto(point)">退订</a>
                    </li>
                </ul>
            </li>
        </ul>
        <div ng-if="!fetchSuccess" class="cannot-sync">
            <img src="assets/images/flash-bang.png">
            <h1 class="font-myriad-keylol">你的资料设定太瞎了，获取不到个人动态了！</h1>
            <h3>若不启用同步订阅，其乐的阅读体验将大打折扣</h3>
        </div>
        <button  class="window-confirm-button" ng-click="cancel()">
            <img class="arrow-right" src="assets/images/arrow-right.png" alt="下一步">
            <img class="new-point" src="assets/images/new-point.png" alt="提交">
            <hgroup ng-if="fetchSuccess" class="font-myriad-keylol">
                <h1>确认同步</h1>
                <h2>Confirming Sync</h2>
            </hgroup>
            <hgroup ng-if="!fetchSuccess" class="font-myriad-keylol">
                <h1>跳过同步</h1>
                <h2>Skipping Sync</h2>
            </hgroup>
        </button>
        <div ng-if="fetchSuccess" class="cancel-synchronization">
            <button ng-if="notFirstTime" type="button" class="border-button left-border" ng-click="jumpToSettings()">同步订阅设置</button>
            <p ng-if="notFirstTime">鼠标滑过可以单独退订某个据点。在设置表单中可以关闭订阅同步。</p>
            <p ng-if="!notFirstTime">这份列表会自动定期更新，若要永久订阅，你可以手动订阅长期有兴趣的据点。</p>
        </div>
        <div ng-if="!fetchSuccess" class="retry-synchronization">
            <button type="button" class="border-button left-border" ng-click="resync()">重新同步</button>
            <p>在 Steam 隐私页面 设置资料状态为「仅限好友」或「公开」后重新同步。</p>
        </div>
    </div>
</window>