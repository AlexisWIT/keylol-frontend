<window position="center" class="window-editor">
    <div class="window clearfix">
        <div class="window-exit-button" ng-click="cancel()">
            <div ng-include="'assets/images/exit.svg'"></div>
        </div>
        <form name="form" ng-submit="submit()">
            <div class="type-title">
                <div class="article-type font-myriad-keylol" popup="inline.showSelector" ng-switch="expanded"
                     ng-click="expand($event)" ng-class="{expanded: expanded}">
                    <span class="expand-button">
                        {{articleTypes[selectedTypeIndex].name}}<span ng-switch-when="false">▾</span><span ng-switch-when="true">▴</span>
                    </span>
                </div>
                <span><input type="text" ng-model="vm.Title" placeholder="标题"></span>
            </div>
            <div class="pad-right clearfix" ng-if="articleTypes[selectedTypeIndex].allowVote">
                <div class="left-content">
                    <h3 ng-if="articleTypes[selectedTypeIndex].allowVote">评价游戏</h3>
                    <input-point limit="1" type="'Game'" class="clearfix" ng-model="inline.voteForPoints" placeholder="'填写一个游戏据点'"></input-point>
                </div>
                <div class="right-content">
                    <h3 ng-if="articleTypes[selectedTypeIndex].allowVote">你的评分</h3>
                    <point-review no-string="true" bind-review="vm.Vote"></point-review>
                </div>
            </div>
            <h3>投稿至据点</h3>
            <input-point ng-class="{disabled: articleTypes[selectedTypeIndex].allowVote}" forbidden="articleTypes[selectedTypeIndex].allowVote" ng-model="inline.attachedPoints" placeholder="'填写游戏会自动填写关联据点'"></input-point>
            <div simditor="editorOptions" ng-model="vm.Content" ng-click="inline.editorDirty = true"></div>
            <div class="centre-parting clearfix" ng-if="articleTypes[selectedTypeIndex].allowVote">
                <div class="left-content">
                    <h3>亮点小结</h3>
                    <pro-con ng-model="vm.Pros"></pro-con>
                </div>
                <div class="right-content">
                    <h3>缺点小结</h3>
                    <pro-con ng-model="vm.Cons" is-negative="true"></pro-con>
                </div>
            </div>
            <div class="summary">
                <h3>概述总结</h3>
                <span>{{vm.Summary.length}}/49</span>
                <input type="text" ng-model="vm.Summary" placeholder="选填：文章在讯息轨道上预览时会展示这段概述。">
            </div>
            <button type="submit" class="window-confirm-button" ng-disabled="submitLock">
                <img class="arrow-right" src="assets/images/arrow-right.png" alt="下一步">
                <img class="signature-pen" src="assets/images/signature-pen.png" alt="提交">
                <hgroup class="font-myriad-keylol">
                    <h1>发布文章</h1>
                    <h2>Publish the Article</h2>
                </hgroup>
            </button>
            <div class="save-draft">
                <button type="button" class="border-button left-border" ng-click="saveDraft()">保存草稿</button>
                <span ng-if="lastSaveTime">自动保存于<span am-time-ago="lastSaveTime"></span></span>
                <p>每发布一篇文章需要使用 5 ◆ 文券，当前有 {{union.$localStorage.user.Coupon}} ◆ 文券。<a href="coupon" target="_blank">（为什么要消耗文券？）</a></p>
            </div>
        </form>
    </div>
</window>