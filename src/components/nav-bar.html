<div class="wrapper">
    <div>
        <a href="/" class="logo" ripple="#fff">
            <img ng-if="!navBar.theme" src="assets/images/logo.svg" alt="其乐 Keylol.com">
            <img ng-if="navBar.theme" src="assets/images/logo-whiteout.svg" alt="其乐 Keylol.com">
            <div ng-if="!navBar.theme" class="logo-content font-myriad-keylol">
                <p>其乐</p>
                <p>Keylol.com</p>
            </div>
        </a>
        <div ng-if="navBar.theme" class="theme-logo">
            <a ng-if="navBar.stateTree.aggregation.point.basicInfo" href="" ui-sref=".frontpage" ripple="#fff">
                <img ng-if="navBar.theme.logo" webp-src="{{navBar.theme.logo | themeLogoUrl}}">
                <div ng-if="!navBar.theme.logo" class="theme-alt">
                    <p>{{navBar.utils.getPreferredPointName(navBar.stateTree.aggregation.point.basicInfo, navBar.stateTree.currentUser)[0]}}</p>
                    <p>{{navBar.utils.getPreferredPointName(navBar.stateTree.aggregation.point.basicInfo, navBar.stateTree.currentUser)[1]}}</p>
                </div>
            </a>
            <a ng-if="navBar.stateTree.content.article.pointBasicInfo || navBar.stateTree.content.activity.pointBasicInfo" href="" ng-href="point/{{navBar.stateTree.content.article.pointBasicInfo.idCode}}" ripple="#fff">
                <img ng-if="navBar.theme.logo" webp-src="{{navBar.theme.logo | themeLogoUrl}}">
                <div ng-if="!navBar.theme.logo" class="theme-alt">
                    <p>{{navBar.utils.getPreferredPointName(navBar.stateTree.content.article.pointBasicInfo || navBar.stateTree.content.activity.pointBasicInfo, navBar.stateTree.currentUser)[0]}}</p>
                    <p>{{navBar.utils.getPreferredPointName(navBar.stateTree.content.article.pointBasicInfo || navBar.stateTree.content.activity.pointBasicInfo, navBar.stateTree.currentUser)[1]}}</p>
                </div>
            </a>
            <a ng-if="navBar.stateTree.aggregation.user.basicInfo" href="" ui-sref=".dossier" ripple="#fff">
                <img ng-if="navBar.theme.logo" webp-src="{{navBar.theme.logo | themeLogoUrl}}">
                <div ng-if="!navBar.theme.logo" class="theme-alt">
                    <p>{{navBar.stateTree.aggregation.user.basicInfo.userName}}</p>
                    <p>keylol.com/user/{{navBar.stateTree.aggregation.user.basicInfo.idCode}}</p>
                </div>
            </a>
        </div>
        <form class="search-box" ng-submit="navBar.search()">
            <input type="search" ng-model="navBar.searchText">
            <a href="" ng-click="navBar.search()" aria-label="搜索">
                <svg aria-hidden="true">
                    <use ng-href="{{'search' | iconSvgUrl }}" xlink:href=""></use>
                </svg>
            </a>
        </form>
    </div>
    <div class="action-hub" ng-if="navBar.stateTree.currentUser && !navBar.stateTree.empty">
        <a href="post-office" ng-class="{active: navBar.stateTree.currentUser.messageCount, focus: navBar.stateTree.postOffice}" ripple="#fff">
            <p>邮政</p>
            <p>{{navBar.stateTree.currentUser.messageCount || "O" | numberAbbreviation}}</p>
        </a>
        <a href="coupon" ng-class="{focus: navBar.stateTree.coupon }" ripple="#fff">
            <p>文券</p>
            <p>{{navBar.stateTree.currentUser.coupon | numberAbbreviation}} ◆</p>
        </a>
        <a href="" ng-click="navBar.showUserHub($event)" popup="navBar.showUserHubPopup">
            <img class="avatar" webp-src="{{navBar.stateTree.currentUser.avatarImage | avatarUrl: 'big'}}" alt="{{navBar.stateTree.currentUser.userName}}">
        </a>
    </div>
    <div class="action-hub" ng-if="!navBar.stateTree.currentUser && !navBar.stateTree.empty">
        <flat-button text="登录" type="invert" click="navBar.showLoginWindow(event)"></flat-button>
        <raised-button text="注册" type="theme" invert="true" click="navBar.showRegistrationWindow(event)" theme-color="::navBar.theme.main"></raised-button>
    </div>
</div>