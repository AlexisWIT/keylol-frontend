<div class="section-action-hub box-shadowed">
    <div class="not-logged-in" ng-if="!actionHub.union.$localStorage.login">
        <a class="log-up" href="" ng-click="actionHub.showRegistrationWindow()">
            <img src="assets/images/steam-logo.png">
            <h4>通过 Steam 账户</h4>
            <h3 class="font-myriad-keylol">加入其乐社区</h3>
        </a>
        <a href="" class="log-in" ng-click="actionHub.showLoginSteamWindow()">已注册用户登录</a>
    </div>
    <div class="has-logged-in" ng-if="actionHub.union.$localStorage.login">
        <div class="actions">
            <a href="post-office" class="border-button top-border" ng-class="{active: actionHub.newMessages[0] || actionHub.newMessages[1] || actionHub.newMessages[2]}">{{(actionHub.newMessages[0] || actionHub.newMessages[1] || actionHub.newMessages[2])?(actionHub.newMessages[0]?"+"+actionHub.newMessages[0]:"")+((actionHub.newMessages[0]&&(actionHub.newMessages[1]||actionHub.newMessages[2]))?"　":"")+(actionHub.newMessages[1]?"···"+actionHub.newMessages[1]:"")+((actionHub.newMessages[1]&&actionHub.newMessages[2])?"　":"")+(actionHub.newMessages[2]?"!!"+actionHub.newMessages[2]:""):"O"}}</a>
        </div>
        <div class="clearfix">
            <a class="avatar-anchor" href="user/{{actionHub.union.$localStorage.user.IdCode}}">
                <img class="avatar-big" webp-src="{{actionHub.union.$localStorage.user.AvatarImage | avatarUrl}}" alt="{{actionHub.union.$localStorage.user.UserName}}">
            </a>
            <div class="name-settings">
                <h4 class="name">
                    <a href="user/{{actionHub.union.$localStorage.user.IdCode}}">{{actionHub.union.$localStorage.user.UserName}}</a>
                </h4>
                <h4 class="settings-link">
                    <a href="" ng-click="actionHub.showSettingsWindow()">设置 / 编辑账户</a>
                </h4>
            </div>
        </div>
        <ul class="links list-inline">
            <li>
                <h4>订阅</h4>
                <a href="/subscriptions">{{actionHub.union.$localStorage.user.SubscribedPointCount}}</a>
            </li>
            <li>
                <h4>文章</h4>
                <a href="user/{{actionHub.union.$localStorage.user.IdCode}}">{{actionHub.union.$localStorage.user.ArticleCount}}</a>
            </li>
            <li>
                <h4>读者</h4>
                <a href="/readers">{{actionHub.union.$localStorage.user.SubscriberCount}}</a>
            </li>
        </ul>
        <div class="coupon-container">
            <span>文券</span>
            <a href="coupon">{{actionHub.union.$localStorage.user.fakeCoupon || actionHub.union.$localStorage.user.Coupon}} ◆</a>
        </div>
        <div class="coupon-change-animation-container" ng-if="!actionHub.hideAnimate">
            <div class="coupon-change-animation" ng-repeat="couponChange in actionHub.couponChanges track by $index">
                <a href="coupon" class="fake-coupon">{{couponChange.Before}} ◆</a>
                <div class="event-container" ng-class="{plus: couponChange.Change >= 0, minus: couponChange.Change < 0}">
                    <span>{{couponChange.Event}}</span>
                    <a href="coupon">{{couponChange.Change<0?"－":"＋"}} {{couponChange.Change<0?-couponChange.Change:couponChange.Change}} ◆</a>
                </div>
            </div>
        </div>
    </div>
</div>